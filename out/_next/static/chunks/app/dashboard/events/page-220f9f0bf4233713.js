(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{45103:function(e,t,n){Promise.resolve().then(n.bind(n,23983))},47821:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(24214);let r=s.Z.create({baseURL:"http://api.taskamo.com/api"});r.interceptors.request.use(e=>{let t=function(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let s=n[e];for(;" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}("token");return e.headers&&t&&(e.headers.authorization="Bearer ".concat(t)),e}),r.interceptors.response.use(e=>e,e=>(console.log(e.request.responseURL,e.request.responseURL.search("/login")),401===e.response.status&&-1===e.request.responseURL.search("/login")&&window.location.replace("/login"),Promise.reject(e)));var o=r},63332:function(e,t,n){"use strict";n.d(t,{Aj:function(){return o},CC:function(){return a},KH:function(){return h},U8:function(){return d},UE:function(){return c},VH:function(){return p},WI:function(){return r},Yz:function(){return x},g4:function(){return m},hD:function(){return l},sS:function(){return u},wA:function(){return i},wD:function(){return f}});var s=n(47821);let r=()=>s.Z.get("/event").then(e=>e.data),o=e=>s.Z.post("/login",e).then(e=>e.data),i=e=>s.Z.post("/register",e).then(e=>e.data),c=()=>s.Z.get("/todo").then(e=>e.data),a=e=>{let{id:t,data:n}=e;return s.Z.put("/todo/".concat(t),n).then(e=>e.data)},u=e=>s.Z.delete("/todo/".concat(e)).then(e=>e.data),l=e=>s.Z.post("/todo",e).then(e=>e.data),d=e=>s.Z.post("/event",e).then(e=>e.data),h=e=>s.Z.delete("/event/".concat(e)).then(e=>e.data),p=e=>{let{id:t,data:n}=e;return s.Z.put("/event/".concat(t),n).then(e=>e.data)},f=()=>s.Z.get("/me").then(e=>e.data),m=e=>s.Z.get("/timeline?date=".concat(e)).then(e=>e.data),x=e=>s.Z.post("/timeline",e).then(e=>e.data)},23983:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s=n(9268),r=n(63332),o=n(95730),i=n(59065),c=n(21628),a=n(50946),u=n(33030),l=n(45138),d=n(1777),h=n(12763),p=n(86006),f=n(74824);function m(){let{data:e,isLoading:t,refetch:n}=(0,f.useQuery)(["events"],()=>(0,r.WI)()),[m]=i.Z.useForm(),[x,g]=(0,p.useState)(!1),[j,Z]=(0,p.useState)("create"),[v,y]=c.ZP.useMessage(),w=e=>{let{id:t,date_ago:n,day:r,month:o,title:i,deleteFn:c,date:u}=e;return(0,s.jsxs)("div",{className:"p-2 rounded bg-boxgroundA100 gap-2 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-boxgroundA100 flex items-center justify-center rounded",children:r}),(0,s.jsx)("p",{children:o})]}),(0,s.jsx)("p",{children:n})]}),(0,s.jsx)("p",{children:i}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.ZP,{onClick:()=>c({id:t}),type:"text",danger:!0,children:"Delete"}),(0,s.jsx)(a.ZP,{onClick:()=>{m.setFieldsValue({title:i,id:t}),Z("update"),F("update")},children:"Edit"})]})]})},{mutateAsync:b}=(0,f.useMutation)({mutationFn:e=>{let{createData:t}=e;return(0,r.U8)(t)},onSuccess(e,t,s){v.open({type:"success",content:"Event Create Successfuly"}),g(!1),m.resetFields(),setTimeout(()=>{n()},1e3)}}),{mutateAsync:k}=(0,f.useMutation)({mutationFn:e=>{let{id:t}=e;return(0,r.KH)(t)},onSuccess(e,t,s){v.open({type:"success",content:"Event Delete Successfuly"}),setTimeout(()=>{n()},1e3)}}),{mutateAsync:N}=(0,f.useMutation)({mutationFn:e=>{let{id:t,updateData:n}=e;return(0,r.VH)({id:t,data:n})},onSuccess(e,t,s){v.open({type:"success",content:"Event Update Successfuly"}),g(!1),m.resetFields(),setTimeout(()=>{n()},1e3)}}),C=(e,t)=>{let{title:n,date:s,id:r}=e;"create"===t?b({createData:{title:n,date:s}}):N({id:r,updateData:{title:n,date:s}})},A=()=>{m.resetFields()},F=e=>{g(!0)},E=()=>{g(!1)};return(0,s.jsxs)(s.Fragment,{children:[y,(0,s.jsx)(u.Z,{onClick:()=>{Z("create"),F("create")},type:"primary",rootClassName:"!w-14 !h-14",icon:(0,s.jsx)(o.Z,{}),tooltip:(0,s.jsx)("div",{children:"Add New Event"})}),(0,s.jsx)(l.Z,{title:"".concat("create"===j?"Add New":"Update"," Event"),onCancel:E,open:x,footer:!1,children:(0,s.jsxs)(i.Z,{layout:"vertical",form:m,name:"control-hooks",onFinish:e=>C(e,j),style:{maxWidth:600},children:[(0,s.jsx)(i.Z.Item,{name:"id",className:"hidden",children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(i.Z.Item,{name:"title",label:"Title",rules:[{required:!0}],children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(i.Z.Item,{name:"date",label:"Date",rules:[{required:!0}],children:(0,s.jsx)(h.Z,{})}),(0,s.jsx)(i.Z.Item,{children:(0,s.jsxs)("div",{className:"flex flex-row gap-2 pt-10",children:[(0,s.jsx)(a.ZP,{type:"primary",htmlType:"submit",children:"Submit"}),(0,s.jsx)(a.ZP,{htmlType:"button",onClick:A,children:"Reset"})]})})]})}),(0,s.jsx)("section",{className:"bg-boxgroundA700 rounded-lg p-4 h-full",children:(0,s.jsx)("div",{className:"grid grid-cols-4 gap-4",children:!t&&e.data.map(e=>(0,s.jsx)(w,{id:e.id,deleteFn:k,...e},e.id))})})]})}},95730:function(e,t,n){"use strict";var s=n(9268);n(86006);let r=e=>(0,s.jsx)("svg",{width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,s.jsx)("path",{d:"M6 12h12M12 18V6",stroke:"#fff",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})});t.Z=r}},function(e){e.O(0,[168,794,341,334,824,582,214,464,402,407,644,30,763,667,139,744],function(){return e(e.s=45103)}),_N_E=e.O()}]);